datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Account {
    id            String   @id @default(uuid())
    email         String
    accountCode   String
    chainId       Int
    ethAddress    String
    safeAddresses String[]
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt

    @@unique([email, accountCode, chainId])
}

model SafeTransaction {
    id          String   @id @default(uuid())
    safeTxHash  String
    safeAddress String
    chainId     Int
    signature   String?
    processed   Boolean  @default(false)
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    @@unique([safeTxHash, chainId])
}

model ResponseCache {
    cacheKey  String   @id
    response  Json
    createdAt DateTime @default(now())
    expiresAt DateTime

    @@map("response_cache")
}
